---
title: N8N教程：搭建公众号自动化写作工作流完整指南
description: 一步步教你如何使用N8N和AI（如Gemini）搭建一个强大的公众号自动化写作工作流。从选题、内容生成到排版发布，本完整指南将帮你极大提升内容创作效率。
abbrlink: 52630d3b
date: 2025-11-03 22:17:27
category: 技术应用
tags:
  - N8N
  - 自动化工作流
  - AIGC
  - 公众号运营
  - 效率工具
  - Gemini
---

最近我用N8N搭建了一套公众号自动化写作系统，效率提升得让我自己都惊讶——从选题到成稿，整个流程压缩到了几分钟。

具体来说，我只需要输入一个内容主题，系统就能自动完成：文章撰写、爆款标题生成、配图匹配、排版美化，最后直接推送到公众号草稿箱。我要做的，只是最后检查一遍，点击发布。

虽然技术上完全可以实现批量自动发布，但考虑到内容质量和平台规则，我还是保留了人工审核这一步——毕竟，好内容值得多一分关。

## N8N到底是什么？
N8N 是一款强大的可视化自动化工具。你可以把它想象成一个“数字流程的乐高积木盒”。通过拖拽不同的功能“节点”（例如数据处理、网络请求、AI模型调用等），你可以将过去需要编写大量代码才能实现的复杂任务，用一个清晰的工作流连接起来，快速实现功能。

最棒的是，N8N 对新手非常友好，不一定需要编写代码，会拖拽和理解节点之间的数据传递就足够了。当然，对于高手，它也允许你在关键节点写入自定义代码，实现更复杂、更个性化的业务逻辑。

## 为什么要用N8N实现自动化写作？
在深入搭建步骤之前，我们先明确这个工作流解决了哪些痛点：
*   **时间成本**：从构思、写作、找图到排版，一篇文章耗时巨大。
*   **创意瓶颈**：有时难以想出吸引人的标题和切入点。
*   **重复劳动**：每次都要手动调整格式、上传图片、复制粘贴。

我们的目标就是将这些重复且耗时的环节交给机器，让我们能专注于最有价值的“创意”和“审核”工作。

## 如何搭建：核心步骤详解
首先，你需要在本地或服务器上安装 N8N。官方文档提供了详细的 `npx` 和 `docker` 安装方式，过程非常简单，这里不再赘述。

我们直接进入核心，分享这个自动化工作流中关键节点的搭建思路。

### 步骤1：启动工作流并接收主题
在本地打开 N8N (例如 `http://localhost:5678/`)，你会看到一个空白的画板。我们的第一步是创建一个 `Manual`（手动）或 `Webhook` 触发器。在这里，我们使用一个 `Chat Message` 节点，它会弹出一个对话框，让我们能够方便地输入本次写作的**核心主题**。

### 步骤2：创建核心AI Agent并配置大模型
**AI Agent** 是整个工作流的大脑。在 N8N 中，一个 Agent 节点集成了大模型（Chat Mode）、记忆（Memory）、工具（Tools）等能力。

1.  **添加大模型**：在 Agent 节点中，点击 "Chat Mode" 添加一个大模型。N8N 支持 OpenAI、Gemini、Ollama 等多种模型。我这里选择的是 **Gemini**，因为它提供了慷慨的免费额度，足以满足日常使用。
2.  **配置API Key**：你需要去你选择的大模型平台（如 Google AI Studio）获取 API Key，并将其添加到 N8N 的凭证库中。这样，N8N 就能代表你调用大模型的能力了。

### 步骤3：设定System Message（系统提示词）
这是最关键的一步，它决定了 AI 的表现。System Message 就像是给 AI 下达的“岗位职责说明书”。

我的原则是：**尽可能把任务描述清楚，让 AI 一次性输出结构化的数据**。这样可以省去后续大量的数据处理节点。

我的 System Message 核心内容如下：
```
你是一个资深的公众号文章专家，擅长撰写爆款技术教程。请根据用户提供的主题，完成以下任务：
1.  生成一个吸引人的文章标题。
2.  撰写一篇约800字的文章正文，结构清晰，包含引言、核心步骤和总结。
3.  根据文章内容，提炼出一个适合用作AI绘画封面图的英文Prompt。
4.  将以上所有内容，以一个完整的JSON格式返回，格式为：{"title": "文章标题", "content": "文章正文...", "image_prompt": "英文绘画提示词"}
```
这一步完成后，我们就从 AI 那里得到了所有需要的原始素材：**标题、正文、图片描述**。

### 步骤4：调用文生图API，生成封面图
拿到 `image_prompt` 后，我们用一个 `HTTP Request` 节点来调用 AI 绘画模型的 API。

这里我使用的是**阿里云百炼的通义文生图接口**，同样有免费额度。配置方法类似：
1.  在阿里云获取 API-Key 并添加到 N8N 凭证库。
2.  在 `HTTP Request` 节点中，设置好请求的 URL、Method (POST)，并按照其 API 文档，将 `image_prompt` 作为参数传入请求体 (Body) 中。

执行成功后，这个节点会返回一个包含图片 URL 的数据，我们将其保存下来用于下一步。

### 步骤5：安装社区节点，上传素材到公众号
为了和微信公众号后台交互，我们需要一个强大的“连接器”。

1.  **安装社区节点**：在 N8N 的设置 (Settings) -> 社区节点 (Community Nodes) 中，搜索并安装 `n8n-nodes-wechat-offiaccount`。这个节点包提供了非常完善的公众号操作功能。
2.  **配置公众号凭证**：你需要先在公众号后台的“基本配置”中找到自己的 `AppID` 和 `AppSecret`，并添加到这个社区节点的凭证中。
3.  **上传图片素材**：使用该节点包中的“新增素材”功能，将上一步获取的图片 URL 上传到公众号的素材库，从而得到一个 `thumb_media_id`。

### 步骤6：整合内容并提交草稿
这是最后的临门一脚。我们使用“新增图文草稿”节点，将之前准备好的所有材料组装起来。

一个常见的“坑”是，直接提交的文本内容排版可能会很乱。我们需要在提交前对内容进行转义处理，确保格式正确。在最终提交的 JSON 数据中，`content` 字段需要特殊处理：

```json
[
  {
    "article_type": "news",
    "title": "{{ $('AI Agent').item.json.output.title }}",
    "author": "良技漫谈",
    "content": "{{ $json.data ? $json.data.replace(/\/g, '\\').replace(/"/g, '\"').replace(/\n/g, '\n') : '' }}",
    "thumb_media_id": "{{ $('提交素材到公众号').item.json.media_id }}",
    "show_cover_pic": 1,
    "need_open_comment": 1,
    "only_fans_can_comment": 0
  }
]
```
执行这个节点后，一篇包含标题、作者、正文和封面图的文章就自动出现在你的公众号草稿箱里了！

## 总结：自动化不是终点，而是创作的“加速器”
通过这套 N8N 工作流，我将过去需要数小时的重复性劳动——写作、构思、配图、排版——压缩到了几分钟。这并不意味着创作的结束，恰恰相反，它让我能将更多精力投入到最有价值的环节：**创意构思、事实核查和内容润色**，确保每一篇文章都兼具效率与品质。

如果你也对提升内容创作效率感兴趣，不妨尝试用 N8N 搭建一套属于你自己的自动化流程。它还可以扩展到更多场景，比如：
*   **热点选题**：定时抓取行业新闻网站，让 AI 自动分析并生成选题建议。
*   **智能配图**：根据文章段落内容，自动生成并插入多张相关的说明性图片。
*   **数据驱动优化**：将已发布文章的阅读数据（如阅读量、点赞数）回传到 N8N，让 AI 分析爆款规律，从而指导未来的创作方向。

自动化不是为了取代思考，而是为了给思考插上翅膀。希望这篇指南能为你打开一扇新的大门。
